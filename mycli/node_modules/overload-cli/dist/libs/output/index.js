"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const utils_1 = require("../../utils");
const runtime_1 = tslib_1.__importDefault(require("./runtime"));
const { resolve } = require('path');
const { writeFileSync } = require('fs');
const LOGGER_TITLE = '输出生成内容';
const initialize = async (screenshotData, config) => {
    (0, utils_1.loggerStart)(LOGGER_TITLE);
    let screenshotDataJSON = '';
    try {
        screenshotDataJSON = JSON.stringify(screenshotData);
    }
    catch (error) {
        console.error(error);
    }
    let runtimeContent = (0, runtime_1.default)();
    runtimeContent = runtimeContent.replace('<!-- caches -->', screenshotDataJSON);
    runtimeContent = runtimeContent.replace('<!-- mode -->', config.routeMode || 'hash');
    runtimeContent = runtimeContent.replace('<!-- rootID -->', config.rootID);
    await writeFileSync(resolve(utils_1.OutputDirname, 'runtime-script.html'), runtimeContent);
    (0, utils_1.loggerEnd)(LOGGER_TITLE);
    return runtimeContent;
};
exports.default = { initialize };
